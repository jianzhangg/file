<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>个人动态学习仪表盘</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-annotation/2.2.1/chartjs-plugin-annotation.min.js"></script>

<style>
    html { scroll-behavior: smooth; }
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;
        background-color: #f8f9fa; padding: 20px; margin: 0;
    }
    .container {
        max-width: 1200px;
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        margin-bottom: 25px;
    }
    #status-bar {
        padding: 15px 20px;
        border-radius: 10px;
        border: 1px solid #e9ecef;
        margin-bottom: 20px;
        font-size: 18px;
        text-align: center;
        line-height: 1.5;
    }
    table {
        border-collapse: collapse; width: 100%;
        border-radius: 10px; overflow: hidden; border: 1px solid #dee2e6;
    }
    thead { background-color: #343a40; color: white; font-size: 18px; }
    th, td { padding: 18px; text-align: left; vertical-align: top; }
    th { font-weight: 600; }
    tbody tr { background-color: #ffffff; border-bottom: 1px solid #dee2e6; }
    tbody tr:last-child { border-bottom: none; }
    td { font-size: 16px; line-height: 1.6; color: #555; }
    strong { font-weight: 600; }
    
    /* --- 颜色分类系统 --- */
    .task-input strong, .task-input td:first-child { color: #0d6efd; } /* 专注蓝 */
    .task-output strong, .task-output td:first-child { color: #198754; } /* 活力绿 */
    .task-review strong, .task-review td:first-child { color: #fd7e14; } /* 智慧橙 */
    .task-warmup strong, .task-warmup td:first-child { color: #20c997; } /* 宁静青 */
    .task-break strong, .task-break td:first-child { color: #6c757d; } /* 中性灰 */

    .highlight { background-color: #FFFBEA !important; }
    .highlight td:first-child { font-weight: 700; }
    
    tr.task-input { border-left: 5px solid #0d6efd; }
    tr.task-output { border-left: 5px solid #198754; }
    tr.task-review { border-left: 5px solid #fd7e14; }
    tr.task-warmup { border-left: 5px solid #20c997; }
    tr.task-break { border-left: 5px solid #6c757d; }

    /* --- 图例和图表样式 --- */
    .legend, .chart-wrapper {
        padding-top: 10px;
    }
    .legend-title, .chart-title {
        text-align: center;
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
        color: #343a40;
    }
    .legend-list {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        padding: 0;
        margin: 0;
        list-style: none;
    }
    .legend-item {
        display: flex;
        align-items: center;
        font-size: 14px;
    }
    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 4px;
        margin-right: 8px;
    }

    @media screen and (max-width: 768px) {
        body { padding: 10px; }
        .container { padding: 15px; }
        thead { display: none; }
        table, tbody, tr, td { display: block; width: 100% !important; box-sizing: border-box; }
        tr { margin-bottom: 15px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border: 1px solid #e9ecef; }
        td { border: none; padding-left: 20px; padding-right: 20px; position: relative; border-bottom: 1px solid #f1f3f5; }
        td:last-child { border-bottom: none; }
        td:before { content: attr(data-label); display: block; font-weight: 600; margin-bottom: 5px; font-size: 14px; }
        .task-input td:before { color: #0d6efd; } .task-output td:before { color: #198754; } .task-review td:before { color: #fd7e14; } .task-warmup td:before { color: #20c997; } .task-break td:before { color: #6c757d; }
    }
</style>
</head>
<body>

<div class="container">
    <div id="status-bar">正在获取当前时间...</div>
    <table>
        <thead><tr><th>时间段</th><th>学习内容 (做什么)</th><th>原理解释 (为什么这么安排)</th></tr></thead>
        <tbody id="schedule-body">
            <tr id="task-0730" class="task-warmup"><td data-label="时间段"><strong>7:30 - 8:30</strong></td><td data-label="学习内容 (做什么)"><strong>沉浸式听力</strong><br>准备早餐、吃饭、晨间整理时，播放 <strong>`Feishu Minutes`</strong> 里的音频或 <strong>`Teacher Han's lessons`</strong> 中已学过的课程音频。</td><td data-label="原理解释 (为什么这么安排)"><strong>低强度预热</strong><br>在不消耗过多精力的情况下，将大脑“频道”调至英语，为专注学习做铺垫。</td></tr>
            <tr id="task-0830" class="task-review"><td data-label="时间段"><strong>8:30 - 9:00</strong></td><td data-label="学习内容 (做什么)"><strong>昨日复盘</strong><br>打开 <strong>`DIDA review words`</strong>，回顾并消化<strong>昨天</strong>记录下的所有知识点。</td><td data-label="原理解释 (为什么这么安排)"><strong>激活短期记忆</strong><br>巩固旧知识，为学习新知识打下基础，提高吸收率。</td></tr>
            <tr id="task-0900" class="task-input"><td data-label="时间段"><strong>9:00 - 10:15</strong></td><td data-label="学习内容 (做什么)"><strong>核心输入：`Teacher Han's lessons`</strong><br>集中精力学习一节<strong>新课</strong>。仔细看视频，理解核心知识点，并在 <strong>`DIDA`</strong> 中记下最重要的笔记。</td><td data-label="原理解释 (为什么这么安排)"><strong>精力巅峰期攻克新知</strong><br>在思维最清晰的时段学习系统性知识，效果最好。</td></tr>
            <tr id="task-1015" class="task-break"><td data-label="时间段"><strong>10:15 - 10:30</strong></td><td data-label="内容"><strong>短暂休息</strong></td><td data-label="说明">离开书桌，远眺，喝水，让大脑“充电”。</td></tr>
            <tr id="task-1030" class="task-input"><td data-label="时间段"><strong>10:30 - 11:30</strong></td><td data-label="学习内容 (做什么)"><strong>专项练习：`Feishu Minutes Shadowing`</strong><br>对飞书里的材料进行“刻意练习”。<strong>一句一句地跟读</strong>，录音对比，反复打磨。</td><td data-label="原理解释 (为什么这么安排)"><strong>将输入转化为肌肉记忆</strong><br>高强度的口语输出练习，将“听懂”转化为“会说”。</td></tr>
            <tr id="task-1130" class="task-output"><td data-label="时间段"><strong>11:30 - 12:15</strong></td><td data-label="学习内容 (做什么)"><strong>即时应用：`TalkAI talk with AI`</strong><br>围绕<strong>上午新学课程</strong>和<strong>Shadowing材料</strong>的主题，与AI外教进行对话。</td><td data-label="原理解释 (为什么这么安排)"><strong>学以致用的第一步</strong><br>在安全的试错环境中立即实践新知识，是最高效的内化方式。</td></tr>
            <tr id="task-1215" class="task-break"><td data-label="时间段"><strong>12:15 - 13:30</strong></td><td data-label="内容"><strong>午餐 & 完全休息</strong></td><td data-label="说明">好好吃饭，可以午睡。让大脑彻底放空，恢复精力。</td></tr>
            <tr id="task-1330" class="task-review"><td data-label="时间段"><strong>13:30 - 14:30</strong></td><td data-label="学习内容 (做什么)"><strong>词汇专项：`TalkAI memory words`</strong><br>系统地背单词。完成App里的学习和测试任务。</td><td data-label="原理解释 (为什么这么安排)"><strong>分解学习任务</strong><br>将相对独立的单词记忆任务放在下午，优化精力分配。</td></tr>
            <tr id="task-1430" class="task-output"><td data-label="时间段"><strong>14:30 - 15:30</strong></td><td data-label="学习内容 (做什么)"><strong>异步交流：`Tandem` 文字聊天</strong><br>与语伴进行<strong>文字交流</strong>，并<strong>预约好晚上的语音通话</strong>。</td><td data-label="原理解释 (为什么这么安排)"><strong>低压输出与社交预热</strong><br>文字聊天有更多思考时间，巩固词汇句型，为语音通话铺垫。</td></tr>
            <tr id="task-1530" class="task-break"><td data-label="时间段"><strong>15:30 - 15:45</strong></td><td data-label="内容"><strong>茶歇</strong></td><td data-label="说明">短暂休息，切换学习模式。</td></tr>
            <tr id="task-1545" class="task-review"><td data-label="时间段"><strong>15:45 - 17:00</strong></td><td data-label="学习内容 (做什么)"><strong>复习与准备</strong><br>1. 打开 <strong>`DIDA`</strong>，复习<strong>一周前</strong>的知识点。<br>2. 准备晚上Tandem语伴聊天的话题。</td><td data-label="原理解释 (为什么这么安排)"><strong>科学复习 & 有备而战</strong><br>间隔重复对抗遗忘。提前准备能让你在实战中更自信。</td></tr>
            <tr id="task-1700" class="task-break"><td data-label="时间段"><strong>17:00 - 21:30</strong></td><td data-label="内容"><strong>晚餐、运动、洗澡</strong></td><td data-label="说明">身体和大脑的恢复期。期间可泛听英语音频保持语境。</td></tr>
            <tr id="task-2130" class="task-output"><td data-label="时间段"><strong>21:30 - 22:15</strong></td><td data-label="学习内容 (做什么)"><strong>核心输出：`Tandem talk with foreigners`</strong><br>与预约好的语伴进行<strong>45分钟</strong>的语音或视频通话。</td><td data-label="原理解释 (为什么这么安排)"><strong>终极实战场</strong><br>检验一天学习成果，将知识转化为技能的加速器。</td></tr>
            <tr id="task-2215" class="task-review"><td data-label="时间段"><strong>22:15 - 22:45</strong></td><td data-label="学习内容 (做什么)"><strong>复盘与捕获 (黄金30分钟)</strong><br>立刻记录通话中的生词、错误和地道用法到<strong>`DIDA`</strong>和<strong>`TalkAI`</strong>。</td><td data-label="原理解释 (为什么这么安排)"><strong>闭合学习循环</strong><br>趁热打铁，将错误转化为进步的阶梯，实现最高效的复盘。</td></tr>
             <tr id="task-2245" class="task-review"><td data-label="时间段"><strong>22:45 - 23:15</strong></td><td data-label="学习内容 (做什么)"><strong>睡前巩固</strong><br>快速浏览一遍今晚记下的新笔记，然后上床休息。</td><td data-label="原理解释 (为什么这么安排)"><strong>利用睡眠魔法</strong><br>大脑会在睡眠中自动整理和巩固睡前信息，实现“躺着进步”。</td></tr>
        </tbody>
    </table>
</div>

<div class="container legend">
    <h3 class="legend-title">颜色分类说明</h3>
    <ul class="legend-list">
        <li class="legend-item"><span class="legend-color" style="background-color: #0d6efd;"></span>核心输入</li>
        <li class="legend-item"><span class="legend-color" style="background-color: #198754;"></span>主动输出</li>
        <li class="legend-item"><span class="legend-color" style="background-color: #fd7e14;"></span>复习巩固</li>
        <li class="legend-item"><span class="legend-color" style="background-color: #20c997;"></span>准备预热</li>
        <li class="legend-item"><span class="legend-color" style="background-color: #6c757d;"></span>休息恢复</li>
    </ul>
</div>

<div class="container chart-wrapper">
    <h3 class="chart-title">每日精力变化曲线</h3>
    <canvas id="energyChart"></canvas>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // --- 日程表逻辑 ---
    let hasScrolled = false;
    const schedule = [
        { id: 'task-0730', start: 7.5, end: 8.5, name: '沉浸式听力' }, { id: 'task-0830', start: 8.5, end: 9.0, name: '昨日复盘' }, { id: 'task-0900', start: 9.0, end: 10.25, name: '核心输入：Teacher Han\'s lessons' }, { id: 'task-1015', start: 10.25, end: 10.5, name: '短暂休息' }, { id: 'task-1030', start: 10.5, end: 11.5, name: '专项练习：Feishu Minutes Shadowing' }, { id: 'task-1130', start: 11.5, end: 12.25, name: '即时应用：TalkAI talk with AI' }, { id: 'task-1215', start: 12.25, end: 13.5, name: '午餐 & 完全休息' }, { id: 'task-1330', start: 13.5, end: 14.5, name: '词汇专项：TalkAI memory words' }, { id: 'task-1430', start: 14.5, end: 15.5, name: '异步交流：Tandem 文字聊天' }, { id: 'task-1530', start: 15.5, end: 15.75, name: '茶歇' }, { id: 'task-1545', start: 15.75, end: 17.0, name: '复习与准备' }, { id: 'task-1700', start: 17.0, end: 21.5, name: '晚餐、运动、洗澡' }, { id: 'task-2130', start: 21.5, end: 22.25, name: '核心输出：Tandem talk with foreigners' }, { id: 'task-2215', start: 22.25, end: 22.75, name: '复盘与捕获 (黄金30分钟)' }, { id: 'task-2245', start: 22.75, end: 23.25, name: '睡前巩固' }
    ];

    function updateSchedule() {
        const now = new Date(); const currentTime = now.getHours() + now.getMinutes() / 60; const formattedTime = now.toLocaleDateString('zh-CN', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' }); let currentTask = null;
        document.querySelectorAll('#schedule-body tr').forEach(row => { row.classList.remove('highlight'); });
        for (const task of schedule) { if (currentTime >= task.start && currentTime < task.end) { currentTask = task; break; } }
        const statusBar = document.getElementById('status-bar');
        if (currentTask) {
            const targetRow = document.getElementById(currentTask.id);
            if (targetRow) {
                targetRow.classList.add('highlight');
                if (!hasScrolled) { setTimeout(() => { targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' }); hasScrolled = true; }, 100); }
            }
            if (targetRow && targetRow.classList.contains('task-break')) { statusBar.innerHTML = `<strong>${formattedTime}</strong><br>当前是：<strong>${currentTask.name}</strong>，请好好放松！`; } else { statusBar.innerHTML = `<strong>${formattedTime}</strong><br>当前任务：<strong>${currentTask.name}</strong>，请保持专注！`; }
        } else {
            let nextTask = schedule.find(task => task.start > currentTime);
            if(nextTask){ statusBar.innerHTML = `<strong>${formattedTime}</strong><br>学习时间结束。下一个任务是：<strong>${nextTask.name}</strong>`; } else { statusBar.innerHTML = `<strong>${formattedTime}</strong><br>今天辛苦了！所有学习任务已完成。`; }
        }
    }

    // --- 精力曲线图逻辑 ---
    const ctx = document.getElementById('energyChart').getContext('2d');
    const energyChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: [7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23],
            datasets: [{
                label: '精力水平',
                data: [30, 60, 95, 90, 80, 65, 50, 40, 60, 75, 70, 60, 55, 50, 45, 30, 20],
                fill: true,
                borderColor: 'rgba(75, 192, 192, 1)',
                backgroundColor: 'rgba(75, 192, 192, 0.2)',
                tension: 0.4 // 使曲线更平滑
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true,
                    max: 100,
                    title: { display: true, text: '精力水平 (0-100)' }
                },
                x: {
                    type: 'linear',
                    min: 7,
                    max: 23,
                    title: { display: true, text: '时间 (24小时制)' }
                }
            },
            plugins: {
                legend: { display: false },
                annotation: {
                    annotations: {
                        currentTimeLine: {
                            type: 'line',
                            mode: 'vertical',
                            scaleID: 'x',
                            value: 7, // 初始值
                            borderColor: 'red',
                            borderWidth: 2,
                            label: {
                                enabled: true,
                                content: '当前时间',
                                position: 'start'
                            }
                        }
                    }
                }
            }
        }
    });

    function updateChart() {
        const now = new Date();
        const currentTime = now.getHours() + now.getMinutes() / 60;
        
        // 更新红色竖线的位置
        energyChart.options.plugins.annotation.annotations.currentTimeLine.value = currentTime;
        energyChart.update();
    }

    // --- 初始化和定时更新 ---
    function masterUpdate() {
        updateSchedule();
        updateChart();
    }
    masterUpdate();
    setInterval(masterUpdate, 1000); // 每秒同时更新日程表和图表
});
</script>

</body>
</html>
